"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[537],{4537:function(e,n,t){t.r(n),t.d(n,{AddMessageForm:function(){return j},Chat:function(){return g},Messages:function(){return m},default:function(){return d}});var r=t(885),s=t(2791),a=t(6871),c=t(6614),u=t(1893),i="chatPage_messageImg__s2YU6",o="chatPage_wrapper__-6Hp2",l="chatPage_container__0IygT",f="chatPage_messageItems__iP8wA",h=t(184),d=function(){return(0,u.C)((function(e){return e.auth.isAuth}))?(0,h.jsx)(g,{}):(0,h.jsx)(a.Fg,{to:"/login/"})},g=function(){var e=(0,u.C)((function(e){return e.chat.status})),n=(0,u.T)();return(0,s.useEffect)((function(){return n((0,c.WE)()),function(){n((0,c.R7)())}}),[]),(0,h.jsxs)("section",{children:["error"===e&&(0,h.jsx)("div",{children:"Error.Please refresh the page"}),(0,h.jsx)(m,{}),(0,h.jsx)(j,{})]})},m=function(){var e=(0,u.C)((function(e){return e.chat.messages})),n=(0,s.useRef)(null),t=(0,s.useState)(!1),a=(0,r.Z)(t,2),c=a[0],i=a[1];return(0,s.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView(!0)}),[e]),(0,h.jsxs)("div",{className:o,onScroll:function(e){var n=e.currentTarget;Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<300?!c&&i(!0):c&&i(!1)},children:[e.map((function(e,n){return(0,h.jsx)(x,{message:e},e.id)})),(0,h.jsx)("div",{ref:n})]})},x=s.memo((function(e){var n=e.message;return(0,h.jsxs)("div",{className:l,children:[(0,h.jsxs)("div",{className:f,children:[(0,h.jsx)("img",{className:i,src:n.photo}),n.userName]}),(0,h.jsx)("span",{children:n.message})]})})),j=function(){var e=(0,s.useState)(""),n=(0,r.Z)(e,2),t=n[0],a=n[1],i=(0,u.T)(),o=(0,u.C)((function(e){return e.chat.status}));return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:(0,h.jsx)("textarea",{onChange:function(e){return a(e.currentTarget.value)},value:t})}),(0,h.jsx)("button",{disabled:"ready"!==o,onClick:function(){t&&(i((0,c.bG)(t)),a(""))},children:"Send"})]})}}}]);
//# sourceMappingURL=537.db2eee04.chunk.js.map